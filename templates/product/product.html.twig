{% extends "base.html.twig" %}

{% set CAKE_TYPE = constant('App\\Entity\\Cake::TYPE') %}

{% block title %}{{ product.title }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}

    <link rel="stylesheet" type="text/css" href="{{ asset('css/product-page.css') }}" />
{% endblock %}

{% block body %}
    <article>
        <img src="{{ asset(imageFolder ~ product.image) }}">
        <div id="product-info">
            <h1>{{ product.title }}</h1>
            <div id="description">{{ product.description }}</div>
            <p id="price">Prix : <span>{{ product.price }} €</span></p>
            <a href="{{ path("app_add_panier", {"id": product.id, "type": type}) }}"><button>Ajouter au panier</button></a>
            <p>{{ likes }} ☆</p>
        </div>
    </article>
    <div class="rating"><!--
       --><a href="#5" title="Donner 5 étoiles">☆</a><!--
       --><a href="#4" title="Donner 4 étoiles">☆</a><!--
       --><a href="#3" title="Donner 3 étoiles">☆</a><!--
       --><a href="#2" title="Donner 2 étoiles">☆</a><!--
       --><a href="#1" title="Donner 1 étoile">☆</a>
    </div>
{% endblock %}

{% block javascripts %}
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        axios
            .post(
                "/like",
                {
                    id_product: "{{ product.id }}",
                    type_product: "{{ type }}",
                    rating: "5"
                },
                {
                    withCredentials: true
                }
            )
            .then(function (response) {
                console.log(response);
            });
    </script>
{% endblock %}